// ---------------------------------------------------------------------------
// Form Resets

input[type="button"], input[type="submit"], input[type="image"],
label, button { cursor: pointer; }

input {
  &[type="search"] { -webkit-appearance: none; }
  &[type="radio"], &[type="checkbox"] { vertical-align: baseline; width: auto !important; }
  &::-webkit-search-decoration { display: none; }
}

textarea {
  overflow: auto;
  resize: vertical;
}

button, input[type="select"], select, textarea {
  @include border-radius(0);
}

optgroup { @include reset-box-model; }

optgroup {
  color: $base;
  font-style: normal;
  font-weight: normal;
}

legend { .iem7 & { margin-left: -7px; } }

::-moz-focus-inner { border: 0; }

// ---------------------------------------------------------------------------
// Placeholders

@mixin placeholder {
  ::-webkit-input-placeholder { @content; }
  :-moz-placeholder { @content; }
  .placeholder { @content; }
}

@include placeholder {
  font-style: italic;
}

// ---------------------------------------------------------------------------
// Form Helpers

$input-font-size: $smallpx;
$input-rhythm: .25;

%input {
  @include sans;
  @include adjust-font-size-to($input-font-size);
  @include rhythm-borders(1px,$input-rhythm,$input-font-size);
  @include box-shadow(inset rgba($blue,.5) 0 0 $xxxsmallem);
  @include rgba-background(rgba(white,.25));
  width: 100%;
  color: inherit;
  border-color: inherit;
  vertical-align: top;
  outline: 0;
  .lt-ie9 & { padding: 0 .5em; }
}

%button {
  margin: 0;
  background-color: $green;
  text-align: center;
  @include sassy-button;
}

@mixin reset-button {
  @include reset-box-model;
  @include reset-font;
  background: none;
  color: inherit;
  text-align: left;
}

%reset-button {
  @include reset-button;
  @include box-shadow(none);
  @include text-shadow(none);
}

.linkaction { @extend %button; }

.errorlist {
  @include no-style-list;
  color: $red;
}

.formfield {
  @include pie-clearfix;
  @include trailer(.5);
  position: relative;
}

@mixin inline-form($label: $left, $input: $center - $label, $context: $center) {
  label {
    @include ellipsis;
    @include span-columns($label,$context);
    padding: rhythm($input-rhythm) 0;
    text-align: right;
    + input, + textarea { @include span-columns($input omega,$context); }
  }
  [type="checkbox"], [type="radio"] {
    .lt-ie9 & {
      position: relative;
      left: space($label, $context);
      top: rhythm(-.25);
    }
    + label {
      @include reset-columns;
      @include pre($label,$context);
      display: inline-block;
      padding: 0;
      text-align: left;
      .lt-ie9 &:before { display: none; }
    }
  }
  .formhelp { @include pre($label, $context); }
}

.formhelp {
  @include adjust-font-size-to($smallpx);
  display: block;
  clear: both;
  margin: 0;
  color: $base1;
  font-style: italic;
}

$form-action-note-size: $smallpx;

.form-actions {
  @include rhythm(.5,0,0,.5);
  position: relative;
  clear: both;
  text-align: right;
  p {
    @include adjust-font-size-to($form-action-note-size);
    display: inline-block;
    margin: 0 .4em rhythm(.5,$form-action-note-size) 0;
  }
  button { @extend %button; }
}

.iqtest {
  @include trailer(2);
  > p {
    @include leader;
    @include leading-border(2px,1);
    font-style: italic;
  }
}

// ---------------------------------------------------------------------------
// Elements

[type="checkbox"], [type="radio"] {
  display: none;
  .lt-ie9 & { display: inline; }
  + label {
    @extend %icon;
    &:before {
      margin-left: .4em;
      color: $base01;
    }
  }
  &:checked + label { &:before { color: $blue; } }
  &:focus + label { color: $base03; }
}

[type="checkbox"] {
  + label { @extend %icon-unchecked; }
  &:checked + label { @extend %icon-checked; }
}

[type="radio"] {
  + label { @extend %icon-radio-unchecked; }
  &:checked + label { @extend %icon-radio-checked; }
}

label {
  display: block;
  color: $base01;
  &:first-letter { text-transform: uppercase; }
}

input {
  &[type="text"], &[type="password"],
  &[type="email"], &[type="url"], &[type="tel"],
  &[type="date"], &[type="datetime"], &[type="datetime-local"],
  &[type="month"], &[type="week"], &[type="time"],
  &[type="number"], &[type="search"], &[type="color"] {
    @extend %input;
    margin: 0;
    min-height: rhythm(1 + $input-rhythm*2, $input-font-size);
  }
}

textarea {
  @extend %input;
  @include transition(200ms min-height);
  min-height: rhythm(1 + $input-rhythm*2, $input-font-size);
}

button { @include reset-button; }

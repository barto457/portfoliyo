// ---------------------------------------------------------------------------
// Village Nav

$village-nav-bg       : $base2;
$village-nav-rhythm   : .25;

%village-nav-span {
  @include bleed($village-bleed, left);
  display: block;
  position: relative;
}

%village-nav-item {
  @extend %village-nav-span;
  @include trailing-border(1px,$village-nav-rhythm,$village-list-size);
  @include padding-leader($village-nav-rhythm,$village-list-size);
  border-color: $village-border-color;
}

.village-nav {
  @extend %village-lists;
  @extend %overflow-y;
  @include box-sizing(content-box);
  left: - $village-bleed;
  width: columns($left);
  padding-left: $village-bleed;
  border: 1px solid $village-border-color;
  border-width: 0 1px;
  z-index: 5;
}

.student { position: relative; }

.select-student {
  @extend %village-nav-item;
  #{$link} {
    @extend %village-activenav;
    @include rgba-background(rgba($village-nav-bg,.25));
    @include background(linear-gradient(bottom, rgba($village-nav-bg,.5), rgba($village-nav-bg,.125)));
  }
  #{$focus} {
    @include rgba-background(rgba($village-nav-bg,.5));
    @include background(linear-gradient(bottom, rgba($village-nav-bg,1), rgba($village-nav-bg,.25)));
  }
  .unread {
    display: none; // @@@ TEMPORARY DISABLING
    @include adjust-font-size-to($smallpx,.75,$village-list-size);
    @include border-radius(.25em);
    @include box-shadow(rgba($back,.5) 0 0 3px inset);
    position: absolute;
    right: $xxxsmallpx;
    top: rhythm(.375,$smallpx);
    padding: 0 .25em;
    background: $accent;
    color: $base3;
    text-align: center;
    &.zero { display: none; }
  }
  &.editing {
    @include mono;
    background: lighten($orange,40);
    min-height: rhythm(1,$village-list-size);
  }
  &.removed {
    @extend %icon;
    @extend %icon-x;
    @include box-shadow($back 0 0 3px inset);
    color: $red;
    background: lighten($red,40);
  }
}

$student-action-color : $base03;

.student-actions {
  @include transition(all 400ms);
  @include css-arrow(left, rhythm($village-nav-rhythm,$village-list-size), $student-action-color);
  position: absolute;
  top: -1px;
  right: 0;
  bottom: 0px;
  padding: rhythm($village-nav-rhythm,$village-list-size);
  padding-right: rhythm(.5,$village-list-size);
  background: $student-action-color;
  color: $back;
  text-transform: capitalize;

  @include opacity(0);
  .student:hover &, .removed + &, .editing + & {
    @include opacity(1);
    z-index: 100;
  }

  form { display: inline; }

  a, button {
    @extend %icon-replace;
    @include link(light,true);
    margin-left: rhythm(.5,$village-list-size);
  }
  .edit-student { @extend %icon-pencil; }
  .save-student {
    @extend %icon-checkmark;
    display: none;
  }
  .remove-student { @extend %icon-trashcan; }
  .undo-remove-student { @extend %icon-undo; }
}

.addstudent-link {
  @extend %village-nav-item;
  @extend %village-addlink;
  @extend %icon;
  @extend %icon-plus;
  font-weight: bold;
}

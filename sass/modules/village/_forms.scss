// ---------------------------------------------------------------------------
// Add/Edit forms

.students-field, .elders-field, .groups-field {
  > .type {
    @include adjust-font-size-to($smallpx);
    padding: rhythm(.25,$smallpx);
    background: $base;
    color: $base3;
    text-transform: uppercase;
  }
  .check-options {
    @extend %check-options;
    height: rhythm(8,$input-font-size);
  }
  @include span-columns($center/2, $center);
  + .students-field, + .elders-field { @include omega; }
}

@function lighten-color($color, $amount) {
  @return adjust-color($color, $lightness: $amount);
}

.relation-fieldset {
  .summary {
    @include leader(-.25);
    text-align: right;
  }
  &.details { @include clearfix; }
}

$label-colors: $yellow $orange $magenta $violet $cyan $green
               lighten-color($yellow, 15%)
               lighten-color($orange, 15%)
               lighten-color($magenta, 15%)
               lighten-color($violet, 15%)
               lighten-color($cyan, 15%)
               lighten-color($green, 15%)
               desaturate(lighten-color($yellow, 50%), 25%)
               desaturate(lighten-color($orange, 50%), 25%)
               desaturate(lighten-color($magenta, 50%), 25%)
               desaturate(lighten-color($violet, 50%), 25%)
               desaturate(lighten-color($cyan, 50%), 25%)
               desaturate(lighten-color($green, 50%), 25%);

.select-groups {
  [class*="label-color-"] {
    &:after {
      @include border-radius(3px);
      @include box-shadow($back 0 0 2px inset);
      content: " ";
      position: absolute;
      right: rhythm(.125,$input-font-size);
      display: inline-block;
      margin-top: rhythm(.125,$input-font-size);
      width: 1em;
      height: 1em;
    }
  }
  $i: 1;
  @each $color in $label-colors {
    .label-color-#{$i}:after { background: $color; }
    $i: $i + 1;
  }
}

.select-students, .select-elders {
  .disabled + .type { @extend %options-checked; }

  $i: 1;
  @each $color in $label-colors {
    .group-selected-#{$i}:before {
      @include text-shadow($back 0 1px 0);
      color: $color;
    }
    $i: $i + 1;
  }
}

.sms-preview {
  @include transition(all 300ms);
  background: $base2;
  border-color: $base1;
  text-align: left;
  h3 {
    display: inline;
    font-weight: bold;
  }
  .form-actions &, .invite-family-fieldset & {
    @include adjust-font-size-to($smallpx);
    @include rhythm-margins;
    @include rhythm-borders(1px,.5);
  }
  .invite-family-fieldset & {
    margin-bottom: 0;
    background: rgba($base3,.5);
  }
  .formfield-help & {
    max-height: rhythm(0);
    overflow: hidden;
    font-style: normal;
    color: $base;
    input:focus ~ &, .changed & {
      @include rhythm-margins(.5);
      @include rhythm-borders(1px,.5);
      max-height: rhythm(4);
    }
  }
}

// ---------------------------------------------------------------------------
// Add/Edit Village

.group-add-form, .group-edit-form { @extend %village-solo-page; }
.village-add-form, .village-edit-form, .bulk-signup { @extend %village-solo-page; }

@include tab-defaults;
@include tabs(english spanish);

.pdf-instructions {
  @extend %type;
  .one-line {
    @include bleed(rhythm(1));
    @include rhythm-padding(1);
    background: $base2;
    color: $orange;
    b { color: $base; }
  }
}

.pdf-previews {
  @include leader;
  @include rhythm-borders(1px,1);
  @include box-shadow($back 0 0 rhythm(.25) inset);
  position: relative;
  background: image-url('handmadepaper.png') repeat scroll;
  .tab-title {
    @include adjust-font-size-to($smallpx);
    @include border-radius(.5rem);
    display: inline-block;
    padding: rhythm(.125) rhythm(.5);
  }
  %active-tab-title {
    background: rgba($back,.25);
    font-weight: normal;
  }
}

$phone-columns: 4;
$preview-columns: $center - $phone-columns;

.pdf-preview {
  @extend %type;
  @include clearfix;
  @include padding-leader;
  font-family: helvetica, sans-serif;
  border-color: $back;
  h3, h4 {
    font-family: inherit;
    font-weight: bold;
  }
  h3 { @include adjust-font-size-to($largepx); }
  h4 { @include trailer; }
  li { @include trailer(.5); }
  ol { @include trailer(2); }
  strong { font-weight: bold; }
  footer {
    @include adjust-font-size-to($smallpx);
    font-style: italic;
    p { margin: 0; }
  }
}

.download-pdf {
  @extend %icon;
  @extend %icon-download;
  @include adjust-font-size-to($smallpx);
  display: block;
  position: absolute;
  top: rhythm(1);
  right: rhythm(1);
  padding: rhythm(.125);
}

.inst {
  @include leader(.5);
  strong {
    @include adjust-font-size-to($largepx);
    display: block;
  }
  .number, .code {
    @include clearfix;
    @include rhythm-margins(.5);
    padding: rhythm(1);
    background: rgba($back,.125);
  }
  .code { @include trailer(1.5); }
}

.personal-note { @include clearfix; }

.student-form-details {
  .summary {
    display: block;
    text-align: right;
    font-style: italic;
    &:after { content: " Â»"; }
  }
  &.open .summary {
    display: none;
  }
}

// ---------------------------------------------------------------------------
// Add/Edit Elder

.elder-invite-form, .elder-edit-form { @extend %village-main-page; }

.school_staff-field {
  @extend %radio-check-defaults;
  @include leader;
}

